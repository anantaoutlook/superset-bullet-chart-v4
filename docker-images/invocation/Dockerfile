FROM rteja91/inv-base:latest
ARG APP_NAME
ARG EKS_CLUSTERNAME
ARG EKS_NAMESPACE
ARG APPENV
ARG DOCKER_IMAGE_NAME_PREFIX
ARG TAG
ARG DEPLOY_HOST
ENV APP_NAME=$APP_NAME
ENV EKS_CLUSTERNAME=${EKS_CLUSTERNAME}
ENV EKS_NAMESPACE=${EKS_NAMESPACE}
ENV APPENV=${APPENV}
ENV IMAGEURI=${DOCKER_IMAGE_NAME_PREFIX}
ENV IMAGE=$APP_NAME
ENV DEPLOY_HOST=${DEPLOY_HOST}
ENV TAG=${TAG}
ENV TF_DATA_DIR="cnab/app/tf"
ENV TF_IN_AUTOMATION=true
ENV TF_PROVISION_DIR="/cnab/app/tf"
ENV TF_PLUGIN_DIR="/root/.terraform.d/.terraform/plugins/linux_amd64"
COPY docker-images/invocation/run /cnab/app
ADD charts /cnab/app/charts